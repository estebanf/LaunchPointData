"use strict";angular.module("launchPointApiclientApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/exceptions",{templateUrl:"views/exceptions.html",controller:"ExceptionsCtrl",controllerAs:"exceptions"}).when("/rule",{templateUrl:"views/rule.html",controller:"RuleCtrl",controllerAs:"rule"}).otherwise({redirectTo:"/"})}]),angular.module("launchPointApiclientApp").controller("MainCtrl",["$http","$uibModal",function(a,b){var c=this,d={casetrackings:["id","haschanges","ruleexecuted","discriminationruleid","isoruleid","iqruleid","senttoiso","senttoiq","senttoiqhold","senttoclosecase","senttodropcase","finishedprocessing"],isotrackings:["id","requestid","isoreceived","isoquerydcm","isorequestrecieved","isosent","isocompleted"],iqtrackings:["id","letter","iqreceived","iqenqueued","iqdequeued","iqsent"],executionerrors:["id","failcount","technicalerror","step","resolved","integration","validation","message"]};this.viewObject=function(a){b.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",controller:"ModalCtrl",controllerAs:"$ctrl",size:"lg",resolve:{item:function(){return a}}})},this.clear=function(){this.search={},this.cases=[],this.pageSize=10,this.page=0,this.count=0,this.totalPages=0,this.pages=[],this.processes={}},this.clear(),this.back=function(){this.page=this.page-1,this.find()},this.forward=function(){this.page=this.page+1,this.find()},this.nav=function(a){this.page=a,this.find()},this.find=function(){var b={},d=[{active:this.search.active}];this.search.CaseId&&""!==this.search.CaseId&&d.push({caseid:this.search.CaseId}),this.search.ClientId&&""!==this.search.ClientId&&d.push({clientid:this.search.ClientId}),this.search.EnvironmentId&&""!==this.search.EnvironmentId&&d.push({environmentid:this.search.EnvironmentId}),0!==d.length&&(1===d.length?b.where=d[0]:b.where={and:d});var e="?where="+JSON.stringify(b.where);b.limit=this.pageSize,b.skip=this.pageSize*this.page;var f="?filter="+JSON.stringify(b);a.get("/api/launchpointcases"+f).then(function(a){c.cases=a.data}),a.get("/api/launchpointcases/count"+e).then(function(a){c.count=a.data.count,c.totalPages=Math.ceil(c.count/c.pageSize),c.pages=[];for(var b=0;b<c.totalPages;b++)c.pages.push(b)})},this.getProcesses=function(b){a.get("/api/launchpointcases/getprocesses/"+b.environmentid+"/"+b.clientid+"/"+b.caseid).then(function(a){var b=a.data.results;angular.forEach(Object.keys(b),function(a,e){b[a].length>0&&(c.processes[a]={keys:d[a],data:b[a]})}),c.process_list=Object.keys(c.processes),console.log(c.processes)})}}]),angular.module("launchPointApiclientApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("launchPointApiclientApp").controller("ExceptionsCtrl",["$http",function(a){var b=this;this.data=[],this.getData=function(c){a.get("/api/executionerrors/"+c).then(function(a){b.data=a.data.results,console.log(b.data)})},this.resolve=function(c){a.get("/api/executionerrors/recover/"+c.id).then(function(d){console.log(d);var e=b.data.indexOf(c);a.get("/api/executionerrors/"+c.id).then(function(a){var c=a.data;c.resolved?b.data.splice(e,1):b.data[e]=c})})}}]),angular.module("launchPointApiclientApp").controller("RuleCtrl",["$http",function(a){var b=this;b.data={},b.haveResults=!1,b.results={},b.testRule=function(){var c={"proc:Test_runRequest":{"@xmlns":{proc:"http://bpms.everteam.com/Processes/BusinessRules/ExecutionRules/process",laun:"http://www.example.org/Launchpoint"},"laun:CaseId":{$:"0"},"laun:BatchId":{$:"0"},"laun:ClientId":{$:b.data.ClientId+""},"laun:EnvironmentId":{$:"0"},"laun:ISOIndicator":{$:b.data.ISOIndicator+""},"laun:Score":{$:b.data.Score+""},"laun:AccidentDate":{$:"2018-01-01"},"laun:BenefitAmount":{$:b.data.BenefitAmount+""},"laun:FundingSource":{$:b.data.FundingSource+""},"laun:LOB":{$:""},"laun:WorkComp":{$:""},"laun:CaseStatus":{$:b.data.CaseStatus+""},"laun:CaseSource":{$:b.data.CaseSource+""},"laun:LifeCycle":{$:""},"laun:CloseReason":{$:""},"laun:State":{$:""},"laun:IQResponseReceived":{$:b.data.IQResponseReceived+""},"laun:IQResponseReceivedReason":{$:""},"laun:CanClose":{$:""},"laun:BelowCostEffectivePursuit":{$:b.data.BelowCostEffectivePursuit+""},"laun:IQReturnMail":{$:b.data.IQReturnMail+""},"laun:InvalidAddress":{$:b.data.InvalidAddress+""},"laun:IQHold":{$:b.data.IQHold+""},"laun:ISOSent":{$:b.data.ISOSent+""},"laun:ISOResponse":{$:""},"laun:vip":{$:b.data.vip+""},"laun:IQLetters":{$:b.data.IQLetters+""},"laun:daysSinceAccident":{$:b.data.daysSinceAccident+""},"laun:BelowCostEffectivePursuitDueDatePassed":{$:b.data.BelowCostEffectivePursuitDueDatePassed+""},"laun:daysSinceLastIQLetter":{$:b.data.daysSinceLastIQLetter+""}}};a.post("/everteam/ode/processes/LaunchPointProcess_Processes_BusinessRules_ExecutionRules_process_externalApp",JSON.stringify(c),{headers:{"Content-Type":"application/json/badgerfish"}}).then(function(a,c){var d=a.data.output;b.haveResults=!0,b.results.closeCase=d["BusinessRule:closeCase"].$,b.results.discriminationRuleId=d["BusinessRule:discriminationRuleId"].$,b.results.doNothing=d["BusinessRule:doNothing"].$,b.results.iq=d["BusinessRule:iq"].$,b.results.iqHold=d["BusinessRule:iqHold"].$,b.results.iqRuleId=d["BusinessRule:iqRuleId"].$,b.results.iso=d["BusinessRule:iso"].$,b.results.isoRuleId=d["BusinessRule:isoRuleId"].$,b.results.sendIQ=d["BusinessRule:sendIQ"].$,b.results.sendIso=d["BusinessRule:sendIso"].$,b.results.stop=d["BusinessRule:stop"].$})}}]),angular.module("launchPointApiclientApp").controller("ModalCtrl",["$uibModalInstance","item",function(a,b){console.log(b);var c=this;this.data=b,c.ok=function(){a.close()}}]),angular.module("launchPointApiclientApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/exceptions.html",'<div class="row"> <div class="col-xs-2"> <div class="btn-group-vertical" role="group" aria-label="..."> <button type="button" class="btn btn-danger" ng-click="exceptions.getData(\'getActiveTechnical\')">Technical active</button> <button type="button" class="btn btn-danger" ng-click="exceptions.getData(\'getActiveFunctional\')">Functional active</button> <button type="button" class="btn btn-info" ng-click="exceptions.getData(\'getResolvedTechnical\')">Technical resolved</button> <button type="button" class="btn btn-info" ng-click="exceptions.getData(\'getResolvedFunctional\')">Functional resolved</button> </div> </div> <div class="col-xs-10"> <table class="table table-condensed table-hover"> <thead> <tr> <th>id</th> <th>environmentid</th> <th>clientid</th> <th>caseid</th> <th>step</th> <th>failcount</th> <th>validation</th> <th>integration</th> <th>message</th> <th> </tr> <tbody> <tr ng-repeat="item in exceptions.data"> <td>{{item.id}}</td> <td>{{item.environmentid}}</td> <td>{{item.clientid}}</td> <td>{{item.caseid}}</td> <td>{{item.step}}</td> <td>{{item.failcount}}</td> <td>{{item.validation}}</td> <td>{{item.integration}}</td> <td>{{item.message}}</td> <td> <button type="button" class="btn btn-default" ng-if="item.technicalerror && !item.resolved" ng-click="exceptions.resolve(item)"> <i class="fa fa-wrench"></i> </button> </td> </tr> </tbody> </thead> </table> </div> </div>'),a.put("views/main.html",'<div class="row"> <div class="col-lg-12"> <form class="form-inline"> <div class="form-group"> <label for="CaseId">ClientId</label> <input type="text" class="form-control" id="CaseId" placeholder="CaseId" ng-model="main.search.CaseId"> </div> <div class="form-group"> <label for="ClientId">ClientId</label> <input type="text" class="form-control" id="ClientId" placeholder="ClientId" ng-model="main.search.ClientId"> </div> <div class="form-group"> <label for="EnvironmentId">EnvironmentId</label> <input type="text" class="form-control" id="EnvironmentId" placeholder="EnvironmentId" ng-model="main.search.EnvironmentId"> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="main.search.active"> Active </label> </div> <button type="button" class="btn btn-default" ng-click="main.find()">Find</button> <button type="button" class="btn btn-default" ng-click="main.clear()">Clear</button> </form> <hr> </div> </div> <div class="row" ng-if="main.cases.length > 0"> <div class="col-lg-3"> <div class="row"> <div class="col-lg-12"> <h4>Cases</h4> <table class="table table-condensed table-hover"> <thead> <tr> <th>CaseId</th> <th>ClientId</th> <th>EnvironmentId</th> <th></th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="lpcase in main.cases"> <td>{{ lpcase.caseid}}</td> <td>{{ lpcase.clientid}}</td> <td>{{ lpcase.environmentid}}</td> <td><button type="button" class="btn btn-default" ng-click="main.viewObject(lpcase)"><i class="fa fa-eye" aria-hidden="true"></i></button></td> <td><button type="button" class="btn btn-default" ng-click="main.getProcesses(lpcase)"><i class="fa fa-cogs" aria-hidden="true"></i></button></td> </tr> </tbody> </table> </div> </div> <div class="row"> <div class="col-lg-12"> <div class="row" ng-if="main.cases.length > 0"> <div class="col-lg-4"> <h5>Records: {{main.count}}</h5> </div> <div class="col-lg-2"> <button type="button" class="btn btn-default" ng-click="main.back()" ng-if="main.page > 0"><i class="fa fa-backward" aria-hidden="true"></i></button> </div> <div class="col-lg-4"> <select class="form-control" ng-options="p as p for p in main.pages track by p" ng-model="main.page" ng-change="main.find()"></select> </div> <div class="col-lg-2"> <button type="button" class="btn btn-default" ng-click="main.forward()" ng-if="main.page < main.totalPages"><i class="fa fa-forward" aria-hidden="true"></i></button> </div> </div> </div> </div> </div> <div class="col-lg-9"> <div class="row" ng-repeat="process in main.process_list"> <div class="col-lg-12"> <h4>{{ process }}</h4> <table class="table table-condensed table-hover"> <thead> <tr> <th ng-repeat="pKey in main.processes[process].keys"> {{ pKey }}</th> <th>  </tr> </thead> <tbody> <tr ng-repeat="item in main.processes[process].data"> <td ng-repeat="iKey in main.processes[process].keys"> {{ item[iKey] }}</td> <td><button type="button" class="btn btn-default" ng-click="main.viewObject(item)"><i class="fa fa-eye" aria-hidden="true"></i></button></td> <!-- <td ng-if="process === \'executionerrors\' && item[\'technicalerror\'] && item[\'resolved\']">here</td> --> </tr> </tbody> </table> </div> </div> </div> </div> <!--\n    <div class="row" ng-if="main.casetracking.length > 0">\n      <div class="col-xs-12">\n        <h4>Case tracking</h4>\n        <table class="table table-condensed table-hover">\n          <thead>\n            <tr>\n              <th>id</th>\n              <th>Changes</th>\n              <th>Started</th>\n              <th>Completed</th>\n              <th>Rules</th>\n              <th>Matched rules</th>\n              <th>IQ</th>\n              <th>ISO</th>\n              <th>stop</th>\n              <th>closeCase</th>\n              <th>sendToISO</th>\n              <th>sendToIQ</th>\n              <th>IQHold</th>\n              <th>doNothing</th>\n              <th />\n            </tr>\n          </thead>\n          <tbody>\n            <tr ng-repeat="ct in main.casetracking">\n              <td>{{ct.id}}</td>\n              <td>\n                <p ng-repeat="ch in ct.changes">\n                  {{ch.attr}}: {{ch.previous}}  {{ch.current}}\n                </p>\n              </td>\n              <td>{{ct.beginprocessingat}}</td>\n              <td>{{ct.finishedprocessingat}}</td>\n              <td>{{ct.ruleexecutedat}}</td>\n              <td>{{ct.discriminationruleid}},{{ct.isoruleid}},{{ct.iqruleid}}</td>\n              <td>{{ct.iq}}</td>\n              <td>{{ct.iso}}</td>\n              <td>{{ct.stop}}</td>\n              <td>{{ct.closecase}}</td>\n              <td>{{ct.sendtoiso}}</td>\n              <td>{{ct.sendtoiq}}</td>\n              <td>{{ct.iqhold}}</td>\n              <td>{{ct.donothing}}</td>\n              <td><button type="button" class="btn btn-default""><i class="fa fa-eye" aria-hidden="true"></i></button></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <div class="row" ng-if="main.isotracking.length > 0">\n      <div class="col-xs-12">\n        <h4>ISO tracking</h4>\n        <table class="table table-condensed table-hover">\n          <thead>\n            <tr>\n              <th>id</th>\n              <th>isoreceivedat</th>\n              <th>isoquerydcmat</th>\n              <th>isorequestreceivedat</th>\n              <th>isosentat</th>\n              <th>isocompletedat</th>\n              <th>requestid</th>\n              <th />\n            </tr>\n          </thead>\n          <tbody>\n            <tr ng-repeat="it in main.isotracking">\n              <td>{{it.id}}</td>\n              <td>{{it.isoreceivedat}}</td>\n              <td>{{it.isoquerydcmat}}</td>\n              <td>{{it.isorequestreceivedat}}</td>\n              <td>{{it.isosentat}}</td>\n              <td>{{it.isocompletedat}}</td>\n              <td>{{it.requestid}}</td>\n              <td><button type="button" class="btn btn-default"><i class="fa fa-eye" aria-hidden="true"></i></button></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <div class="row" ng-if="main.iqtracking.length > 0">\n      <div class="col-xs-12">\n        <h4>IQ tracking</h4>\n        <table class="table table-condensed table-hover">\n          <thead>\n            <tr>\n              <th>id</th>\n              <th>iqreceivedat</th>\n              <th>iqenqueuedat</th>\n              <th>iqdequeuedat</th>\n              <th>iqsentat</th>\n              <th />\n            </tr>\n          </thead>\n          <tbody>\n            <tr ng-repeat="it in main.iqtracking">\n              <td>{{it.id}}</td>\n              <td>{{it.iqreceivedat}}</td>\n              <td>{{it.iqenqueuedat}}</td>\n              <td>{{it.iqdequeuedat}}</td>\n              <td>{{it.iqsentat}}</td>\n              <td><button type="button" class="btn btn-default"><i class="fa fa-eye" aria-hidden="true"></i></button></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <div class="row" ng-if="main.executionerror.length > 0">\n      <div class="col-xs-12">\n        <h4>Execution error</h4>\n        <table class="table table-condensed table-hover">\n          <thead>\n            <tr>\n              <th>id</th>\n              <th>failcount</th>\n              <th>technicalerror</th>\n              <th>step</th>\n              <th>resolved</th>\n              <th>integration</th>\n              <th>validation</th>\n              <th>message</th>\n              <th />\n            </tr>\n          </thead>\n          <tbody>\n            <tr ng-repeat="ee in main.executionerror">\n              <td>{{ee.id}}</td>\n              <td>{{ee.failcount}}</td>\n              <td>{{ee.technicalerror}}</td>\n              <td>{{ee.step}}</td>\n              <td>{{ee.resolved}}</td>\n              <td>{{ee.integration}}</td>\n              <td>{{ee.validation}}</td>\n              <td>{{ee.message}}</td>\n              <td><button type="button" class="btn btn-default"><i class="fa fa-eye" aria-hidden="true"></i></button></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n --> <script type="text/ng-template" id="myModalContent.html"><div class="modal-header">\n        <h3 class="modal-title" id="modal-title">View details</h3>\n    </div>\n    <div class="modal-body" id="modal-body">\n      <pre>\n        {{ $ctrl.data | json }}\n      </pre>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-primary" type="button" ng-click="$ctrl.ok()">OK</button>\n    </div></script>'),a.put("views/rule.html",'<div class="row"> <div class="col-lg-2"> <div class="form-group"> <label>ClientId</label> <input type="number" class="form-control" id="ClientId" placeholder="Score" ng-model="rule.data.ClientId"> </div> <div class="form-group"> <label>Score</label> <input type="number" class="form-control" id="Score" placeholder="Score" ng-model="rule.data.Score"> </div> <div class="form-group"> <label>ISOIndicator:&nbsp;</label> <select class="form-control" ng-model="rule.data.ISOIndicator"> <option>0</option> <option>1</option> </select> </div> <div class="form-group"> <label>BenefitAmount</label> <input type="number" class="form-control" id="BenefitAmount" placeholder="BenefitAmount" ng-model="rule.data.BenefitAmount"> </div> <div class="form-group"> <label>FundingSource:&nbsp;</label> <select class="form-control" ng-model="rule.data.FundingSource"> <option>Medicare</option> <option>Medicaid</option> <option>Other</option> </select> </div> </div> <div class="col-lg-2"> <div class="form-group"> <label>CaseStatus:&nbsp;</label> <select class="form-control" ng-model="rule.data.CaseStatus"> <option>Investigation</option> <option>CWOC</option> <option>Other</option> </select> </div> <div class="form-group"> <label>CaseSource:&nbsp;</label> <select class="form-control" ng-model="rule.data.CaseSource"> <option>User</option> <option>System</option> </select> </div> <div class="form-group"> <label>IQResponseReceived:&nbsp;</label> <select class="form-control" ng-model="rule.data.IQResponseReceived"> <option>true</option> <option>false</option> </select> </div> <div class="form-group"> <label>BelowCostEffectivePursuit:&nbsp;</label> <select class="form-control" ng-model="rule.data.BelowCostEffectivePursuit"> <option>true</option> <option>false</option> </select> </div> <div class="form-group"> <label>IQReturnMail:&nbsp;</label> <select class="form-control" ng-model="rule.data.IQReturnMail"> <option>true</option> <option>false</option> </select> </div> </div> <div class="col-lg-2"> <div class="form-group"> <label>IQHold:&nbsp;</label> <select class="form-control" ng-model="rule.data.IQHold"> <option>true</option> <option>false</option> </select> </div> <div class="form-group"> <label>ISOSent:&nbsp;</label> <select class="form-control" ng-model="rule.data.ISOSent"> <option>true</option> <option>false</option> </select> </div> <div class="form-group"> <label>vip:&nbsp;</label> <select class="form-control" ng-model="rule.data.vip"> <option>true</option> <option>false</option> </select> </div> <div class="form-group"> <label>IQLetters</label> <input type="number" class="form-control" id="IQLetters" placeholder="IQLetters" ng-model="rule.data.IQLetters"> </div> </div> <div class="col-lg-2"> <div class="form-group"> <label>daysSinceAccident</label> <input type="number" class="form-control" id="daysSinceAccident" placeholder="daysSinceAccident" ng-model="rule.data.daysSinceAccident"> </div> <div class="form-group"> <label>BelowCostEffectivePursuitDueDatePassed</label> <select class="form-control" ng-model="rule.data.BelowCostEffectivePursuitDueDatePassed"> <option>true</option> <option>false</option> </select> </div> <div class="form-group"> <label>daysSinceLastIQLetter</label> <input type="number" class="form-control" id="daysSinceLastIQLetter" placeholder="daysSinceLastIQLetter" ng-model="rule.data.daysSinceLastIQLetter"> </div> <button type="button" class="btn btn-default" ng-click="rule.testRule()">Test</button> </div> <div class="col-lg-4"> <div class="list-group"> <a href="#" class="list-group-item active"> <h4 class="list-group-item-heading">Matched rules</h4> </a> <a href="#" class="list-group-item"> <h5 class="list-group-item-heading">discriminationRuleId</h5> <p class="list-group-item-text">{{ rule.results.discriminationRuleId }}</p> </a> <a href="#" class="list-group-item"> <h5 class="list-group-item-heading">iqRuleId</h5> <p class="list-group-item-text">{{ rule.results.iqRuleId }}</p> </a> <a href="#" class="list-group-item"> <h5 class="list-group-item-heading">isoRuleId</h5> <p class="list-group-item-text">{{ rule.results.isoRuleId }}</p> </a> <a href="#" class="list-group-item active"> <h4 class="list-group-item-heading">Case identification</h4> </a> <a href="#" class="list-group-item"> <h5 class="list-group-item-heading">iq</h5> <p class="list-group-item-text">{{ rule.results.iq }}</p> </a> <a href="#" class="list-group-item"> <h5 class="list-group-item-heading">iso</h5> <p class="list-group-item-text">{{ rule.results.iso }}</p> </a> <a href="#" class="list-group-item active"> <h4 class="list-group-item-heading">Actions</h4> </a> <a href="#" class="list-group-item"> <h5 class="list-group-item-heading">sendIQ</h5> <p class="list-group-item-text">{{ rule.results.sendIQ }}</p> </a> <a href="#" class="list-group-item"> <h5 class="list-group-item-heading">sendIso</h5> <p class="list-group-item-text">{{ rule.results.sendIso }}</p> </a> <a href="#" class="list-group-item"> <h5 class="list-group-item-heading">closeCase</h5> <p class="list-group-item-text">{{ rule.results.closeCase }}</p> </a> <a href="#" class="list-group-item"> <h5 class="list-group-item-heading">iqHold</h5> <p class="list-group-item-text">{{ rule.results.iqHold }}</p> </a> <a href="#" class="list-group-item"> <h5 class="list-group-item-heading">stop</h5> <p class="list-group-item-text">{{ rule.results.stop }}</p> </a> <a href="#" class="list-group-item"> <h5 class="list-group-item-heading">doNothing</h5> <p class="list-group-item-text">{{ rule.results.doNothing }}</p> </a> </div> </div> </div>')}]);